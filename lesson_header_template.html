<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>תבנית הדר לשיעור – כפתורי מצב יום/לילה והדפסה</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    /* כפתורי מצב יום/לילה והדפסה בהדר */
    .sa-actions {
      display: flex;
      gap: 12px;
      align-items: center;
      direction: ltr;
      flex-wrap: wrap;
    }
    .sa-actions .sa-divider {
      width: 1px;
      height: 24px;
      background: #d0d5dd;
    }
    .sa-btn {
      font: inherit;
      line-height: 1;
      border: 1px solid #d0d5dd;
      background: #ffffff;
      color: #0f172a;
      padding: 10px 12px;
      border-radius: 12px;
      cursor: pointer;
      display: inline-flex;
      gap: 10px;
      align-items: center;
      font-size: 15px;
    }
    .sa-btn.primary {
      background: #0ea5e9;
      color: #00131d;
      border-color: transparent;
    }
    .sa-btn svg {
      width: 20px;
      height: 20px;
      display: block;
    }
    .sa-btn .lbl {
      display: none; /* אייקונים בלבד, ללא טקסט */
    }
    @media (max-width: 640px) {
      .sa-actions {
        gap: 8px;
      }
      .sa-actions .sa-divider {
        height: 20px;
      }
      .sa-btn {
        padding: 8px 10px;
        font-size: 14px;
      }
      .sa-btn svg {
        width: 18px;
        height: 18px;
      }
    }

    /* מצב כהה בסיסי – ניתן להתאים לצבעי האתר שלך */
    html.sa-dark {
      filter: invert(1) hue-rotate(180deg);
      background: #000000;
    }
    html.sa-dark img,
    html.sa-dark video,
    html.sa-dark canvas,
    html.sa-dark svg image {
      filter: invert(1) hue-rotate(180deg);
    }

    /* סגנון דוגמה להדר – לא חובה להשתמש אחד לאחד, רק לשמור על המחלקות */
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f5f5f5;
      color: #111827;
    }
    .site-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 16px;
      background: #ffffff;
      border-bottom: 1px solid #e5e7eb;
    }
    .site-header .brand h1 {
      margin: 0;
      font-size: 20px;
    }
    main {
      padding: 16px;
    }
  </style>
</head>
<body>
  <!--
    תבנית הדר:
    בגרסאות האמיתיות של דפי השיעור יש לשמור על מבנה ההדר הזה –
    רק לשנות את הטקסט של <h1> לכותרת השיעור.
  -->
  <header class="site-header">
    <div class="brand">
      <h1>כותרת השיעור</h1>
    </div>
    <div class="nav"><!-- כאן יופיעו כפתורי מצב יום/לילה והדפסה --></div>
  </header>

  <main>
    <h2>תוכן שיעור לדוגמה</h2>
    <p>בקובצי השיעורים האמיתיים, כאן יופיע התוכן שנוצר מהסיכום / תמלול.</p>
  </main>

  <!--
    סקריפט אחיד:
    יש להעתיק אותו כפי שהוא לכל דף שיעור, לפני </body>.
  -->
  <script>
  (function(){
    const HEADER_SELECTOR = '.site-header .nav, header .nav, .site-header nav, header nav';

    function makeBar(){
      const ICON_PRINT = '<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M19 8H5a3 3 0 0 0-3 3v6h4v4h12v-4h4v-6a3 3 0 0 0-3-3zm-4 11H9v-3h6zm1-15H8v3h8z" fill="currentColor"/></svg>';
      const ICON_SUN   = '<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 4V1h0v3zm0 19v-3h0v3zM4 12H1v0h3zm22 0h-3v0h3zM5.64 5.64L3.51 3.51l0 0 2.13 2.13zM20.49 20.49l-2.13-2.13 0 0 2.13 2.13zM18.36 5.64l2.13-2.13 0 0-2.13 2.13zM3.51 20.49l2.13-2.13 0 0-2.13 2.13zM12 7a5 5 0 100 10 5 5 0 000-10z" fill="currentColor"/></svg>';
      const ICON_MOON  = '<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M21 12.79A9 9 0 0111.21 3 7 7 0 1021 12.79z" fill="currentColor"/></svg>';

      const bar = document.createElement('div');
      bar.className = 'sa-actions';

      const theme = document.createElement('button');
      theme.className = 'sa-btn';
      theme.type = 'button';
      theme.title = 'מצב יום/לילה';
      theme.dataset.sun = ICON_SUN;
      theme.dataset.moon = ICON_MOON;

      const divider = document.createElement('div');
      divider.className = 'sa-divider';

      const printBtn = document.createElement('button');
      printBtn.className = 'sa-btn primary';
      printBtn.type = 'button';
      printBtn.title = 'הדפס';
      printBtn.innerHTML = ICON_PRINT;

      bar.appendChild(theme);
      bar.appendChild(divider);
      bar.appendChild(printBtn);

      return {bar, theme, printBtn};
    }

    function initThemeButton(btn){
      function isDark(){ return document.documentElement.classList.contains('sa-dark'); }
      function icon(){ return isDark() ? btn.dataset.moon : btn.dataset.sun; }

      btn.addEventListener('click', ()=>{
        document.documentElement.classList.toggle('sa-dark');
        btn.innerHTML = icon();
        try{ localStorage.setItem('sa-theme', isDark() ? 'dark' : 'light'); }catch(e){}
      });

      let t = 'light';
      try{ t = localStorage.getItem('sa-theme') || t; }catch(e){}
      document.documentElement.classList.toggle('sa-dark', t === 'dark');
      btn.innerHTML = icon();
    }

    function injectButtons(){
      let navs = document.querySelectorAll(HEADER_SELECTOR);
      if(!navs.length){
        const header = document.querySelector('.site-header') || document.querySelector('header');
        if(header){
          let aux = header.querySelector('.nav');
          if(!aux){
            aux = document.createElement('div');
            aux.className = 'nav';
            header.appendChild(aux);
          }
          navs = [aux];
        }
      }

      navs.forEach(nav=>{
        if(nav.querySelector('.sa-actions')) return;
        const {bar, theme, printBtn} = makeBar();
        nav.appendChild(bar);
        initThemeButton(theme);
        printBtn.addEventListener('click', ()=> window.print());
      });
    }

    if(document.readyState === 'loading'){
      document.addEventListener('DOMContentLoaded', injectButtons);
    }else{
      injectButtons();
    }
  })();
  </script>
</body>
</html>
